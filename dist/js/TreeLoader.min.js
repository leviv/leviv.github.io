"use strict";!function(){function e(){var e,t,r,n,i,s;this.getRootURL=function(){return e},this.getTreeSlug=function(){return t},this.getTreeStyle=function(){return r},this.getCSSPriority=function(){return s},this.getLoaderScript=function(){return n},this.getTreeContainer=function(){return i};var o=document.querySelectorAll("script[src]");!function(e){n=e}(o[o.length-1]),function(t){e=/https?:\/\/(?:(?:localhost:3000|dev)\/decision-tree|(?:enptree)\.(?:staging\.)?wpengine\.com)\b/.exec(t),null===e&&(e="https://tree.mediaengagement.org")}(this.getLoaderScript().src),function(e){null===e||""===e?console.error('No tree specified. Add "?tree=slug-of-tree" to your URL, like this: https://tree.mediaengagement.org/dist/js/TreeLoader.min.js?tree=citizen'):t=e}(this.getParameterByName("tree",this.getLoaderScript().src)),function(e){r=null===e||""===e?"base":e}(this.getParameterByName("style",this.getLoaderScript().src)),function(e){s=/.+(important|clean-slate)$/.test(e)?"important":""}(this.getTreeStyle()),i=this.createTreeContainer(this.getTreeSlug(),this.getLoaderScript());var c=[{src:this.getRootURL()+"/dist/js/cme-tree.min.js",type:"js"},{src:this.getRootURL()+"/dist/css/"+this.getTreeStyle()+".min.css",type:"css"}];this.loadResources(c).then(this.runCreateTree.bind(this))}e.prototype={constructor:e,getParameterByName:function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=r.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},createTreeContainer:function(e,t){var r=document.createElement("div");return r.id="cme-tree__"+e,r.classList.add("cme-tree__loader-container"),t.parentNode.insertBefore(r,t.nextSibling),r},loadResources:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.loadResource(e[r]));return Promise.all(t)},loadResource:function(e){return new Promise(function(t,r){var n,i,s,o;switch(e.type){case"js":i="script";break;case"css":i="link"}switch(n=document.createElement(i),n.onload=function(){t(e.src)},n.onerror=function(){r(e.src)},e.type){case"js":n.type="text/javascript",n.async=!0,s="src",o="body";break;case"css":n.type="text/css",n.rel="stylesheet",s="href",o="head"}n[s]=e.src,document[o].appendChild(n)})},runCreateTree:function(){var e={slug:this.getTreeSlug(),container:this.getTreeContainer(),cssPriority:this.getCSSPriority()};window.createTree(e)}};new e}(window);